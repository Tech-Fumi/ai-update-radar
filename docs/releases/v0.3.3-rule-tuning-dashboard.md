# v0.3.3-rule-tuning-dashboard

集めた learning signals を使って、ルール改善ターゲットを UI で即座に特定できるようにした。

## Added

### /learning ダッシュボード

Rule Tuning Dashboard で以下を表示:

| セクション | 表示内容 |
|-----------|---------|
| Overview | 総アクション数、採用率、期間 |
| Rule ID 別採用率 | 各ルールの total/accepted/rate |
| 推奨アクション別採用率 | retry/rerun/fix/noop の採用率 |
| Confusion Matrix | 推奨 vs 選択のマトリクス |
| ズレ一覧 | 最新10件の推奨≠選択ケース（run_id リンク付き） |

### API 拡張

`GET /api/learning/stats` に追加:

```json
{
  "by_reason": {
    "R2_TIMEOUT_RETRY": { "total": 5, "accepted": 4, "rate": 0.8 },
    "R5_FAILED_DEFAULT_FIX": { "total": 10, "accepted": 3, "rate": 0.3 }
  },
  "mismatch_top": [
    {
      "run_id": "run_xxx",
      "recommended": "fix",
      "reason": "R5_FAILED_DEFAULT_FIX",
      "chosen": "rerun",
      "ts": "2026-01-17T10:00:00"
    }
  ]
}
```

## 使い方

1. `/learning` にアクセス
2. 期間を選択（24h / 7d）
3. Rule ID 別採用率で改善ターゲットを特定
4. ズレ一覧から具体的な run を調査

## 効果

| Before | After |
|--------|-------|
| ログを grep して分析 | UI で即座に確認 |
| ルールごとの効果が不明 | Rule ID 別採用率で可視化 |
| ズレの原因調査が手間 | run_id リンクで1クリック調査 |

## Commits

### infra-automation
- `ab4abf2` feat(relay): add by_reason and mismatch_top to learning stats (v0.3.3)

### ai-update-radar
- `90bcc5b` feat(frontend): add rule tuning dashboard /learning (v0.3.3)
