# v0.1.7-conversation-search

外部AI会話ログの検索・フィルタ機能。

## Added

### relay_api.py

- **ExternalAiMeta モデル**: has_conversation, providers, models
- **ResultLogger._extract_external_ai_meta()**: conversation.jsonl からメタデータ抽出
- **ResultLogger.save_result()**: summary に external_ai を追加
- **ResultLogger.list_runs()**: has_conversation, provider, model フィルタ
- **GET /runs エンドポイント**: 3つのクエリパラメータ追加

### frontend/src/app/runs/page.tsx

- **ExternalAiMeta 型定義**
- **フィルタ状態**: conversationFilter, providerFilter, modelFilter
- **フィルタ UI**: 外部AI有無ボタン、provider/model テキスト入力
- **テーブル列追加**: 外部AI 列（プロバイダー表示、hover でモデル）

## API

### GET /runs クエリパラメータ（v0.1.7 追加）

| パラメータ | 型 | 説明 |
|-----------|-----|------|
| `has_conversation` | bool | 外部AI会話ログの有無 |
| `provider` | string | プロバイダー（完全一致） |
| `model` | string | モデル（部分一致） |

### result.json summary 構造（v0.1.7 追加）

```json
{
  "summary": {
    "passed": true,
    "duration_ms": 12345,
    "changes": 3,
    "external_ai": {
      "has_conversation": true,
      "providers": ["openai", "anthropic"],
      "models": ["gpt-4o", "claude-3-5-sonnet"]
    }
  }
}
```

## Done 定義

- [x] `/runs?has_conversation=true` で会話ログ付きだけ出る
- [x] `provider=openai` で絞れる
- [x] `model=gpt` 部分一致で絞れる
- [x] UI から同等の操作ができる

## Commits

### infra-automation
- `f0785d4` feat(relay): add external_ai metadata and search filters (v0.1.7)

### ai-update-radar
- `2a71818` feat(frontend): add external AI filters to /runs page (v0.1.7)
