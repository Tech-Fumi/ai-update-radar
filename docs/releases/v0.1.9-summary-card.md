# v0.1.9-summary-card

Run の Summary Card 自動生成機能。会話ログを読まずに意思決定が可能に。

## Added

### claude-relay-bridge/summary_card_generator.py

- `generate_summary_card()`: conversation.jsonl + result.json から要約カードを生成
- ai_dispatch を使用して AI に要約を依頼
- 会話ログなしの場合は簡易カードを自動生成

### claude-relay-bridge/relay_api.py

- `save_result()` に summary_card 生成を統合
- `get_result()` で summary_card を含めて返却

### frontend/src/app/runs/[run_id]/page.tsx

- Summary Card 表示セクションを追加
- decision, hypothesis, confidence, key_points, evidence を表示

## Summary Card フォーマット

```json
{
  "decision": "成功/失敗/要再試行/要調査",
  "hypothesis": "結果の原因仮説",
  "confidence": 0.0-1.0,
  "key_points": ["重要ポイント1", "重要ポイント2"],
  "evidence": ["根拠となる箇所"],
  "generated_by": "summarization"
}
```

## UI

Run 詳細ページに Summary Card セクションを追加:
- Decision: 色分け表示（成功=緑、失敗=赤、再試行=黄）
- Confidence: プログレスバーで可視化
- Key Points: 箇条書きリスト
- Evidence: コード形式で表示

## Done 定義

- [x] summary_card.json が生成される
- [x] get_result で summary_card が返却される
- [x] UI で Summary Card が表示される

## 会話ログ機能の活用開始

v0.1.4〜v0.1.8 で完成した会話ログ基盤の「最初の活用例」:

| 基盤 | 活用 |
|------|------|
| 取得（v0.1.4） | → 要約対象 |
| マスキング（v0.1.5） | → 安全な要約 |
| 容量制御（v0.1.6） | → プレビューを使用 |
| 検索（v0.1.7） | → カード表示対象の特定 |
| CI（v0.1.8） | → 品質担保 |

## Commits

### infra-automation
- `927f0bc` feat(relay): add summary_card generation (v0.1.9)

### ai-update-radar
- `f019ed5` feat(frontend): add Summary Card display (v0.1.9)
