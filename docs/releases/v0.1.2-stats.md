# v0.1.2-stats

## Added
- **/runs Stats Cards**: 24h 集計カードを /runs ページ上部に追加
  - **Failed (24h)**: 失敗件数（クリックで failed フィルター）
  - **Top error_stage**: 頻出エラーステージ TOP3
  - **TIMEOUT (24h)**: タイムアウト件数と割合

- **GET /runs/stats API**: 24h 集計エンドポイント
  - total, completed, failed, timeouts
  - by_error_stage, by_error_code 内訳

## 運用フロー強化

```
/runs → 統計カードで異常を検知 → クリックでフィルタ → 詳細確認 → アクション
```

**"見る → 気づく → 絞る" の導線が完成。**

## Note: インフラ変更（副作用）
- ccr の `start-mcp-servers-full.sh` が `~/.env` を読み込むようになった
- `ANTHROPIC_API_KEY` 等が MCP サーバーに渡る
- ux-tester は Playwright 依存不足で ccr では未動作（スキップ処理追加予定）

## Health Check (運用追加)

- `verify-runs.py`: 毎時の健全性チェック（systemd timer）
- 5項目検証: result.json, artifacts, hash整合性, JSONL照合, timestamp
- `--auto-fix`: FAIL 検知 → Fix Task 自動作成
- 暴走防止: `--max-fix 5` + `.auto_fix_created` フラグ

## Commits

### ai-update-radar
- `0c322e9` feat(runs): add 24h stats cards to /runs page

### infra-automation
- `a96bc24` feat(relay): add GET /runs/stats API for 24h aggregation
- `a26f947` feat(verify-runs): add runaway prevention for auto-fix

---

**Status: Frozen** (2026-01-15)
